# =============================================================================
# Nexus Analyzer Environment Configuration
# =============================================================================
# Copy this file to .env and update with your actual values
# DO NOT commit .env to version control

# =============================================================================
# Database Configuration (PostgreSQL)
# =============================================================================
POSTGRES_USER=nexus_admin
POSTGRES_PASSWORD=nexus_password_change_me
POSTGRES_DB=nexus_analyzer
POSTGRES_PORT=5432

# Database URL (used by backend application)
DATABASE_URL=postgresql://nexus_admin:nexus_password_change_me@postgres:5432/nexus_analyzer

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_PORT=6379
REDIS_URL=redis://redis:6379/0

# =============================================================================
# MinIO / S3 Configuration
# =============================================================================
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin_change_me
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001

# S3 Configuration (used by backend)
S3_ENDPOINT_URL=http://minio:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin_change_me
S3_BUCKET_NAME=nexus-analyzer
S3_REGION=us-east-1

# =============================================================================
# Backend API Configuration
# =============================================================================
BACKEND_PORT=8000

# Security
# CRITICAL: Generate a cryptographically secure SECRET_KEY!
# Run: python backend/scripts/generate_secret_key.py
# DO NOT use the example below - it will be rejected by validation!
# Minimum 32 characters, high entropy required
SECRET_KEY=REPLACE_ME_RUN_python_backend_scripts_generate_secret_key_py
JWT_ALGORITHM=HS256
# Access tokens: short-lived (recommended: 15 minutes)
ACCESS_TOKEN_EXPIRE_MINUTES=15
# Refresh tokens: longer-lived (recommended: 7 days)
REFRESH_TOKEN_EXPIRE_DAYS=7

# Cookie Settings (for httpOnly token storage)
# Set COOKIE_SECURE=true in production with HTTPS
COOKIE_SECURE=false
# CSRF protection: "strict", "lax", or "none"
COOKIE_SAMESITE=lax
# Optional: Set to your domain in production (e.g., ".yourdomain.com")
# COOKIE_DOMAIN=

# CORS (comma-separated list of allowed origins)
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# Environment
ENVIRONMENT=development

# =============================================================================
# Frontend Configuration
# =============================================================================
FRONTEND_PORT=3000
NODE_ENV=development

# API URL (accessible from browser)
NEXT_PUBLIC_API_URL=http://localhost:8000

# =============================================================================
# Celery Configuration
# =============================================================================
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0

# =============================================================================
# Email Configuration (for notifications - optional)
# =============================================================================
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@example.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM_EMAIL=noreply@nexus-analyzer.com
# SMTP_FROM_NAME=Nexus Analyzer

# =============================================================================
# Multi-Tenancy Configuration
# =============================================================================
# ENABLE_MULTI_TENANCY=true
# DEFAULT_TENANT_SUBDOMAIN=demo

# =============================================================================
# File Upload Configuration
# =============================================================================
MAX_UPLOAD_SIZE_MB=100
ALLOWED_FILE_TYPES=csv,xlsx

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# =============================================================================
# Rate Limiting
# =============================================================================
# Protects API from brute force attacks and abuse
RATE_LIMIT_ENABLED=true
# Default rate limit for general API endpoints (format: "requests/period")
RATE_LIMIT_DEFAULT=100/minute
# Stricter limit for authentication endpoints (login, register, password change)
RATE_LIMIT_AUTH=5/minute
# Limit for file upload endpoints
RATE_LIMIT_UPLOAD=10/hour
# Optional: custom Redis URL for rate limit storage (defaults to REDIS_URL if not set)
# RATE_LIMIT_STORAGE_URL=redis://redis:6379/1

# =============================================================================
# Feature Flags
# =============================================================================
ENABLE_REGISTRATION=true
ENABLE_EMAIL_VERIFICATION=false
ENABLE_AUDIT_LOG=true

# =============================================================================
# External Services (optional)
# =============================================================================
# SENTRY_DSN=your-sentry-dsn
# ANALYTICS_ID=your-analytics-id

# =============================================================================
# Development/Testing
# =============================================================================
# RUN_MIGRATIONS_ON_STARTUP=false
# SEED_DATABASE=false
# DEBUG=false
